!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=13)}({0:function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},13:function(t,e,n){"use strict";n.r(e);var r=n(2),o=n.n(r),i={android:function(){return navigator.userAgent.match(/Android/i)},blackberry:function(){return navigator.userAgent.match(/BlackBerry/i)},ios:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},opera:function(){return navigator.userAgent.match(/Opera Mini/i)},windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return i.android()||i.blackberry()||i.ios()||i.opera()||i.windows()}},a=i,c=function(t){return t},u=function(t){if(null==t)return c;var e,n,r=t.scale[0],o=t.scale[1],i=t.translate[0],a=t.translate[1];return function(t,c){c||(e=n=0);var u=2,l=t.length,f=new Array(l);for(f[0]=(e+=t[0])*r+i,f[1]=(n+=t[1])*o+a;u<l;)f[u]=t[u],++u;return f}},l=function(t,e){for(var n,r=t.length,o=r-e;o<--r;)n=t[o],t[o++]=t[r],t[r]=n},f=function(t,e){return"GeometryCollection"===e.type?{type:"FeatureCollection",features:e.geometries.map(function(e){return s(t,e)})}:s(t,e)};function s(t,e){var n=e.id,r=e.bbox,o=null==e.properties?{}:e.properties,i=p(t,e);return null==n&&null==r?{type:"Feature",properties:o,geometry:i}:null==r?{type:"Feature",id:n,properties:o,geometry:i}:{type:"Feature",id:n,bbox:r,properties:o,geometry:i}}function p(t,e){var n=u(t.transform),r=t.arcs;function o(t,e){e.length&&e.pop();for(var o=r[t<0?~t:t],i=0,a=o.length;i<a;++i)e.push(n(o[i],i));t<0&&l(e,a)}function i(t){return n(t)}function a(t){for(var e=[],n=0,r=t.length;n<r;++n)o(t[n],e);return e.length<2&&e.push(e[0]),e}function c(t){for(var e=a(t);e.length<4;)e.push(e[0]);return e}function f(t){return t.map(c)}return function t(e){var n,r=e.type;switch(r){case"GeometryCollection":return{type:r,geometries:e.geometries.map(t)};case"Point":n=i(e.coordinates);break;case"MultiPoint":n=e.coordinates.map(i);break;case"LineString":n=a(e.arcs);break;case"MultiLineString":n=e.arcs.map(a);break;case"Polygon":n=f(e.arcs);break;case"MultiPolygon":n=e.arcs.map(f);break;default:return null}return{type:r,coordinates:n}}(e)}var d=new ArrayBuffer(16);new Float64Array(d),new Uint32Array(d);Math.PI,Math.abs,Math.atan2,Math.cos,Math.sin;function y(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function v(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var g=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],b=12,m=840,h=[],w=[],j=[],O=[],A=[],M=d3.select("#globe"),x=M.select("svg"),P=null,S=null,k=null,_=null,T=null,F=null,E=0;function I(){var t=window.innerHeight,e=M.node().offsetWidth,n=.75*Math.min(e,t),r=n,o=n;x.at({width:r,height:o}),E=o/2-b,T.translate([r/2,o/2]).scale(E).clipAngle(90),P.at("cx",r/2).at("cy",o/2).at("r",T.scale()),S.at("d",F({type:"Sphere"})),_.at("d",F),k.at("d",F)}function D(t){var e=t.ccn3,n=t.duration,r=void 0===n?2e3:n,o=h.find(function(t){return t.ccn3===e});A.find(function(t){return t.id===e})?(k.classed("is-active",function(t){return e!==m&&t.id===e}),d3.transition().duration(r).ease(d3.easeCubicInOut).tween("rotate",function(){var t=[o.lng,o.lat],e=d3.interpolate(T.rotate(),[-t[0],-t[1]]);return function(t){T.rotate(e(t)),_.at("d",F),k.at("d",F)}})):console.log("--- no match ---")}function C(t){return t.map(function(t){return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){v(t,e,n[e])})}return t}({},t,{ccn3:+t.ccn3,lat:+t.latlng.split(",")[0].trim(),lng:+t.latlng.split(",")[1].trim()})})}function W(){var t,e=["by-year","by-month"].map(function(t){return"assets/data/result-".concat(t,"--").concat("page-one",".csv")});(t=d3).loadData.apply(t,y(e).concat([function(t,e){t&&console.log(t),j=e[0],O=e[1],function(){var t=0;setInterval(function(){var e=j[t],n=h.find(function(t){return t.common===e.country}),r=n.ccn3,o=n.flag;D({ccn3:r}),M.select("h3").html("".concat(j[t].year,' <span class="flag">').concat(o,"</span>")),t+=1},2500)}(),function(){var t=d3.nest().key(function(t){return t.year}).entries(O),e=d3.select("#timeline").selectAll(".year").data(t).enter().append("div.year"),n=(e.append("h3").text(function(t){return t.key}),e.append("ul").selectAll("li").data(function(t){return t.values}).enter().append("li"));n.append("span.month").text(function(t){return g[+t.month-1]}),n.append("span.flag").text(function(t){var e=h.find(function(e){return e.common===t.country});return e?e.flag:""})}()}]))}var $={init:function(){var t,e=["countries.csv","world-110m.json"].map(function(t){return"assets/data/".concat(t)});(t=d3).loadData.apply(t,y(e).concat([function(t,e){t&&console.log(t),h=C(e[0]),w=e[1],function(){T=d3.geoOrthographic(),F=d3.geoPath().projection(T),A=f(w,w.objects.countries).features,S=x.append("path.sphere"),_=x.append("path.graticule"),k=x.selectAll(".country").data(A).enter().append("path.country"),P=x.append("circle.outline");var t=d3.geoGraticule();_.datum(t),D({ccn3:m,duration:0})}(),I(),W()}]))},resize:I},z=d3.select("body"),B=0;function G(){var t=z.node().offsetWidth;B!==t&&(B=t,$.resize())}z.classed("is-mobile",a.any()),window.addEventListener("resize",o()(G,150)),function(){if(z.select("header").classed("is-sticky")){var t=z.select(".header__menu"),e=z.select(".header__toggle");e.on("click",function(){var n=t.classed("is-visible");t.classed("is-visible",!n),e.classed("is-visible",!n)})}}(),$.init()},2:function(t,e,n){(function(e){var n="Expected a function",r=NaN,o="[object Symbol]",i=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,u=/^0o[0-7]+$/i,l=parseInt,f="object"==typeof e&&e&&e.Object===Object&&e,s="object"==typeof self&&self&&self.Object===Object&&self,p=f||s||Function("return this")(),d=Object.prototype.toString,y=Math.max,v=Math.min,g=function(){return p.Date.now()};function b(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function m(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&d.call(t)==o}(t))return r;if(b(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=b(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(i,"");var n=c.test(t);return n||u.test(t)?l(t.slice(2),n?2:8):a.test(t)?r:+t}t.exports=function(t,e,r){var o,i,a,c,u,l,f=0,s=!1,p=!1,d=!0;if("function"!=typeof t)throw new TypeError(n);function h(e){var n=o,r=i;return o=i=void 0,f=e,c=t.apply(r,n)}function w(t){var n=t-l;return void 0===l||n>=e||n<0||p&&t-f>=a}function j(){var t=g();if(w(t))return O(t);u=setTimeout(j,function(t){var n=e-(t-l);return p?v(n,a-(t-f)):n}(t))}function O(t){return u=void 0,d&&o?h(t):(o=i=void 0,c)}function A(){var t=g(),n=w(t);if(o=arguments,i=this,l=t,n){if(void 0===u)return function(t){return f=t,u=setTimeout(j,e),s?h(t):c}(l);if(p)return u=setTimeout(j,e),h(l)}return void 0===u&&(u=setTimeout(j,e)),c}return e=m(e)||0,b(r)&&(s=!!r.leading,a=(p="maxWait"in r)?y(m(r.maxWait)||0,e):a,d="trailing"in r?!!r.trailing:d),A.cancel=function(){void 0!==u&&clearTimeout(u),f=0,o=l=i=u=void 0},A.flush=function(){return void 0===u?c:O(g())},A}}).call(this,n(0))}});